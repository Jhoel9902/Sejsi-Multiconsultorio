<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-body p-4">
        <h5 class="card-title mb-4"><i class="bi bi-person-plus me-2"></i>Registrar nuevo paciente</h5>

        <% if (error) { %>
          <div class="alert alert-danger"><%= error %></div>
        <% } %>

        <form method="post" action="/pacientes" class="needs-validation" novalidate accept-charset="UTF-8">
          <div class="row g-3">
            <!-- Datos personales -->
            <h6 class="col-12 mt-3 text-muted">Datos personales</h6>
            
            <div class="col-md-6">
              <label class="form-label">Nombre <span class="text-danger">*</span></label>
              <input type="text" class="form-control" name="nombre" required pattern="^[a-zA-ZáéíóúñÁÉÍÓÚÑ\s]+$" title="Solo letras y espacios" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Apellido paterno <span class="text-danger">*</span></label>
              <input type="text" class="form-control" name="apellido_paterno" required pattern="^[a-zA-ZáéíóúñÁÉÍÓÚÑ\s]+$" title="Solo letras y espacios" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Apellido materno</label>
              <input type="text" class="form-control" name="apellido_materno" pattern="^[a-zA-ZáéíóúñÁÉÍÓÚÑ\s]*$" title="Solo letras y espacios" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Fecha de nacimiento <span class="text-danger">*</span></label>
              <input type="date" class="form-control" name="fecha_nacimiento" required />
              <small class="form-text text-muted">Debe ser mayor de 1 año y menor de 100 años</small>
            </div>

            <!-- Documentos y contacto -->
            <h6 class="col-12 mt-3 text-muted">Documentos e identificación</h6>

            <div class="col-md-6">
              <label class="form-label">Cédula de identidad <span class="text-danger">*</span></label>
              <input type="text" class="form-control" name="ci" required pattern="^[0-9]{7,8}[A-Z]?$" title="Formato: 7-8 dígitos + letra opcional" placeholder="Ej: 12345678 o 12345678A" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Correo electrónico</label>
              <input type="email" class="form-control" name="correo" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Teléfono/Celular <span class="text-danger">*</span></label>
              <input type="tel" class="form-control" name="celular" required pattern="^[0-9]{10,11}$" title="10-11 dígitos sin espacios" placeholder="Ej: 71234567" />
            </div>
            <div class="col-md-6">
              <label class="form-label">Nacionalidad</label>
              <input type="text" class="form-control" name="nacionalidad" />
            </div>

            <!-- Datos médicos y civiles -->
            <h6 class="col-12 mt-3 text-muted">Datos médicos y civiles</h6>

            <div class="col-md-4">
              <label class="form-label">Tipo de sangre</label>
              <select class="form-select" name="tipo_sangre">
                <option value="">-- Seleccionar --</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Estado civil</label>
              <select class="form-select" name="estado_civil">
                <option value="">-- Seleccionar --</option>
                <option value="Soltero/a">Soltero/a</option>
                <option value="Casado/a">Casado/a</option>
                <option value="Divorciado/a">Divorciado/a</option>
                <option value="Viudo/a">Viudo/a</option>
                <option value="Unión libre">Unión libre</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Contacto de emergencia</label>
              <input type="text" class="form-control" name="contacto_emerg" placeholder="Nombre y teléfono" />
            </div>

            <!-- Domicilio -->
            <h6 class="col-12 mt-3 text-muted">Domicilio</h6>

            <div class="col-12">
              <label class="form-label">Domicilio</label>
              <input type="text" class="form-control" name="domicilio" />
            </div>

            <!-- Antecedentes médicos -->
            <h6 class="col-12 mt-3 text-muted">Antecedentes médicos</h6>

            <div class="col-12">
              <label class="form-label">Alergias</label>
              <textarea class="form-control" name="alergias" rows="2"></textarea>
            </div>
            <div class="col-12">
              <label class="form-label">Enfermedades base</label>
              <textarea class="form-control" name="enfermedad_base" rows="2"></textarea>
            </div>
            <div class="col-12">
              <label class="form-label">Observaciones</label>
              <textarea class="form-control" name="observaciones" rows="2"></textarea>
            </div>

            <!-- Botones -->
            <div class="col-12 mt-4">
              <button type="submit" class="btn btn-primary me-2"><i class="bi bi-check-lg me-1"></i>Registrar</button>
              <a href="/pacientes" class="btn btn-outline-secondary"><i class="bi bi-x-lg me-1"></i>Cancelar</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
